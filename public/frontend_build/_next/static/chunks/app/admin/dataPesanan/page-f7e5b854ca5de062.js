(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77],{384:(e,t,a)=>{Promise.resolve().then(a.bind(a,1240))},1240:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(5155),n=a(2115);async function i(){let e=await fetch("/api/admin/pesanan",{headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Gagal mengambil data pesanan");return(await e.json()).data||[]}async function r(e,t){let a=await fetch("/api/admin/pesanan/".concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({status:t})});if(!a.ok)throw Error((await a.json()).message||"Gagal mengubah status pesanan");return(await a.json()).data}function c(){let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(!0),[l,d]=(0,n.useState)(null),x=(0,n.useCallback)(async()=>{c(!0),d(null);try{let e=await i();t(e)}catch(e){e instanceof Error?d(e.message):d("Terjadi kesalahan tidak diketahui")}finally{c(!1)}},[]);(0,n.useEffect)(()=>{x()},[x]);let p=async(e,a)=>{let s=["pending","confirmed","paid","completed","cancelled"],n=(s.indexOf(a)+1)%s.length,i=s[n];if(confirm("Ubah status pesanan ID ".concat(e,' dari "').concat(a,'" menjadi "').concat(i,'"?')))try{let a=await r(e,i);t(e=>e.map(e=>e.id===a.id?a:e)),alert("Status pesanan berhasil diubah!")}catch(e){e instanceof Error?alert("Error: ".concat(e.message)):alert("Terjadi kesalahan saat mengubah status.")}};return a?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Memuat data pesanan..."}):l?(0,s.jsxs)("div",{className:"text-red-500 text-center mt-10",children:["Error: ",l," ",(0,s.jsx)("button",{onClick:x,className:"text-blue-500 ml-2",children:"Coba Lagi"})]}):(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Manajemen Data Pesanan"}),(0,s.jsx)("div",{className:"overflow-x-auto shadow-md rounded-lg",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID Pesanan"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pemesan (User ID)"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lapangan (ID)"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jam Mulai"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Harga"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.id}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.userId}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.lapanganId}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.tanggalPesan).toLocaleDateString("id-ID")}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jamMulai}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["Rp ",Number(e.totalHarga).toLocaleString("id-ID")]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \n                    ".concat("completed"===e.status||"paid"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"confirmed"===e.status?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsx)("button",{onClick:()=>p(e.id,e.status),className:"text-indigo-600 hover:text-indigo-900",children:"Ubah Status"})})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Tidak ada data pesanan."})})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(384)),_N_E=e.O()}]);